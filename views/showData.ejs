<%- include('templates/header')%>

<article id="contenido" class="">

    <br><br><br>
    
    <div class="row">
        <div class="col-4"></div>
        <div class="col-4" id="ct">  <h1 id="Title" class="text-center text-light bg-muted">Registro actual de los sensores</h1></div>
        <div class="col-4"></div>
    </div>
    
    <br> 



        <div class="row">
        <div class="col-1"></div>
        <div class="col-10">
           
            <div class="row">
                <div class="col">
                    <div class="container mt-3 bg-dark text-light" id="tc">
                        <div >
                            <div class="card-header">
                              <br>
                            </div>
                            <h1>Humedad</h1>
                            <div class="card-body ">
                                <table class="table table-bordered table-dark table-hover table-fixed" id="table_humedad">
                                        <th>Dia</th>
                                        <th>Humedad</th>
                                    </thead>
                                    <tbody id="humedad_body">
                    
                
                    
                                    </tbody>
                                </table>
                                <br>
                            </div>
                            <div class="card-footer"></div>
                        </div>   
                    </div>
                </div>
                <div class="col-1"></div>
                <div class="col">
                 
                    <div class="container mt-3 bg-dark text-light" id="tc"> 
                        <div >
                            <div class="card-header">
                              <br>
                            </div>
                            <h1>Movimiento</h1>
                            <div class="card-body ">
                                <table class="table table-bordered table-dark table-hover" id="table_move">
                                        <th>Dia</th>
                                        <th>Movimiento</th>
                                    </thead>
                                    <tbody id="move_body">
                    
                
                    
                                    </tbody>
                                </table>
                                <br>
                            </div>
                            <div class="card-footer"></div>
                        </div>   
                    </div>



                </div>
              </div>





        </div>
        <div class="col-1"></div>
      </div>


    
    
    <script>
                    
    log = [];
    oJson = {};
    var htmlTags = "";
var maxRows = 5; // Establece el número máximo de filas

var humedadCount = 0; // Contador para la tabla de humedad
var moveCount = 0; // Contador para la tabla de movimiento

function rJson() {

    fetch('http://localhost:3000/api/getData')
        .then((response) => response.json())
        .then((json) => {

            oJson = json;
            console.log(oJson);

            oJson[0].datos.map((data) => {
                console.log(data);
                if (humedadCount < maxRows) { // Comprueba si el contador es menor que el número máximo de filas
                    htmlTags += '<tr id="HTab">' +
                        '<td>' + data.fecha + '</td>' +
                        '<td>' + data.valor + '</td>' +
                        '</tr>';
                    humedadCount++; // Aumenta el contador
                }
            });
            $('#humedad_body').append(htmlTags);
            htmlTags = ""; // Limpia el valor de htmlTags para la siguiente tabla

            oJson[1].datos.map((datas) => {
                console.log(datas);
                if (moveCount < maxRows) { // Comprueba si el contador es menor que el número máximo de filas
                    htmlTags += '<tr id="MTab">' +
                        '<td>' + datas.fecha + '</td>' +
                        '<td>' + datas.valor + '</td>' +
                        '</tr>';
                    moveCount++; // Aumenta el contador
                }
            });
            $('#move_body').append(htmlTags);
            htmlTags = ""; // Limpia el valor de htmlTags para la siguiente tabla

            //console.log(oJson);

        })
    return true;
}
rJson();

setInterval('rJson()', 1000);



    </script>
    
    
    
    <br><br><br>
    
    
    </article>
<%- include('templates/footer')%>